# ğŸ­ Cultural Events Pipeline

**Projet Data Full-Stack : Analyse des Ã©vÃ©nements culturels**

Pipeline complet RAW â†’ ENRICHED â†’ SQL â†’ DASHBOARD pour analyser l'attractivitÃ© territoriale via les Ã©vÃ©nements culturels.

---

## ğŸ“‹ Table des matiÃ¨res

- [Vue d'ensemble](#vue-densemble)
- [Architecture](#architecture)
- [Technologies](#technologies)
- [Installation](#installation)
- [Utilisation](#utilisation)
- [Tests](#tests)
- [Choix techniques](#choix-techniques)
- [Limites](#limites)

---

## ğŸ¯ Vue d'ensemble

Ce projet rÃ©pond Ã  la problÃ©matique suivante :

> **Comment analyser l'offre culturelle d'un territoire pour comprendre les types d'Ã©vÃ©nements, leur localisation et les pÃ©riodes actives ?**


# ğŸ“¦ Livrables attendus

Ce projet fournit lâ€™ensemble des livrables demandÃ©s :

| Livrable | Statut |
|---------|--------|
| DÃ©pÃ´t GitHub complet | âœ” |
| README dÃ©taillÃ© | âœ” |
| Instructions dâ€™installation | âœ” |
| Description de lâ€™architecture | âœ” |
| Choix techniques | âœ” |
| Limites du projet | âœ” |
| Code source complet | âœ” |
| Tests unitaires & intÃ©gration | âœ” 23 tests passÃ©s |
| SchÃ©ma SQL (migration + fichier SQL) | âœ” `sql/schema.sql` |
| Mini-produit data professionnel | âœ” |


### DonnÃ©es collectÃ©es
- **Source** : Paris Open Data (data.gouv.fr)
- **Volume** : 300+ Ã©vÃ©nements culturels
- **Types** : Concerts, thÃ©Ã¢tre, expositions, festivals, etc.

### FonctionnalitÃ©s
- ğŸ“Š Dashboard interactif avec filtres
- ğŸ—ºï¸ GÃ©olocalisation des Ã©vÃ©nements
- ğŸ“ˆ Statistiques en temps rÃ©el
- ğŸ” Recherche avancÃ©e

---

## ğŸ—ï¸ Architecture

```
Internet API
    â†“
MongoDB (RAW)           â† DonnÃ©es brutes intactes
    â†“
Enrichissement          â† GÃ©ocodage + CatÃ©gorisation
    â†“
MongoDB (ENRICHED)      â† DonnÃ©es transformÃ©es
    â†“
ETL
    â†“
PostgreSQL              â† Base relationnelle optimisÃ©e
    â†“
FastAPI                 â† API REST
    â†“
React Dasboard         â† Interface utilisateur
    â†“
```
# ğŸ“ Arborescence du projet

```bash
cultural-events-pipeline/
â”‚
â”œâ”€â”€ api/                 # API FastAPI
â”œâ”€â”€ enrichment/          # Enrichissement (gÃ©ocodage, dates, catÃ©gories)
â”œâ”€â”€ etl/                 # ETL vers PostgreSQL
â”œâ”€â”€ frontend/            # Dashboard React
â”œâ”€â”€ scripts/             # Scripts utilitaires
â”œâ”€â”€ sql/                 # SchÃ©ma SQL + requÃªtes
â”œâ”€â”€ storage/             # Repositories MongoDB
â”œâ”€â”€ tests/               # Tests unitaires & intÃ©gration
â””â”€â”€ README.md


### SÃ©paration des responsabilitÃ©s

| Ã‰tape | ResponsabilitÃ© | Technologie |
|-------|---------------|-------------|
| Collecte | RÃ©cupÃ©ration donnÃ©es | Python + Requests |
| Stockage RAW | PrÃ©servation intÃ©grale | MongoDB |
| Enrichissement | Transformation mÃ©tier | Python + APIs |
| SQL | Exploitation performante | PostgreSQL |
| API | Exposition des donnÃ©es | FastAPI |
| Frontend | Visualisation | React + TypeScript |

---

## ğŸ’» Technologies

### Backend
- **Python 3.13.8** : Langage principal
- **FastAPI** : API REST moderne et performante
- **SQLAlchemy** : ORM pour PostgreSQL
- **PyMongo** : Client MongoDB officiel
- **Pydantic** : Validation de donnÃ©es

### Frontend
- **React 18** : Library UI
- **TypeScript** : Typage statique
- **Tailwind CSS** : Framework CSS utility-first

### Bases de donnÃ©es
- **MongoDB 6+** : Stockage NoSQL (RAW + Enriched)
- **PostgreSQL 15+** : Base relationnelle (exploitation)

### Tests
- **pytest** : Tests unitaires et d'intÃ©gration
- **Jest** : Tests frontend
- **httpx** : Tests API asynchrones

---

## ğŸš€ Installation

### PrÃ©requis

```bash
# VÃ©rifier les versions
python --version  # 3.9+
node --version    # 16+
```

### Ã‰tape 1 : Cloner le projet

```bash
git clone https://github.com/ashley28ashley/devops-test
cd cultural-events-pipeline
```

### Ã‰tape 2 : Installer les dÃ©pendances Python

```bash
# CrÃ©er un environnement virtuel
python -m venv venv

# Activer l'environnement
source venv/bin/activate  # Mac/Linux
venv\Scripts\activate     # Windows

# Installer les dÃ©pendances
pip install -r requirements.txt
```

### Ã‰tape 3 : Configurer les bases de donnÃ©es

#### MongoDB (via Docker - recommandÃ©)
```bash
docker run -d -p 27017:27017 --name mongodb mongo:6
```

#### PostgreSQL (via Docker - recommandÃ©)
```bash
docker run -d -p 5432:5432 \
  -e POSTGRES_USER=postgres \
  -e POSTGRES_PASSWORD=postgres \
  -e POSTGRES_DB=cultural_events \
  --name postgres postgres:15
```

#### Ou installation locale
- MongoDB : https://www.mongodb.com/docs/manual/installation/
- PostgreSQL : https://www.postgresql.org/download/

### Ã‰tape 4 : Configuration

```bash
# Copier le fichier d'environnement
cp .env.example .env

# Ã‰diter les variables si nÃ©cessaire
nano .env
```

### Ã‰tape 5 : Initialiser les bases

```bash
python scripts/init_db.py
```

---

## ğŸ“– Utilisation

### Pipeline complet

```bash
# Lancer tout le pipeline (collecte â†’ enrichissement â†’ ETL)
python scripts/run_pipeline.py
```

### Ã‰tape par Ã©tape

#### 1. Collecter les donnÃ©es
```bash
python collect_events_paris.py
# GÃ©nÃ¨re: events_raw.json (300+ Ã©vÃ©nements)
```

#### 2. Stocker dans MongoDB RAW
```bash
python storage/raw_repository.py
# InsÃ¨re dans: events_raw collection
```

#### 3. Enrichir les donnÃ©es
```bash
python enrichment/enrichment_pipeline.py
# CrÃ©e: events_enriched collection
```

#### 4. ETL vers PostgreSQL
```bash
python -m etl/loader.py
# Remplit: tables events, categories, cities
```

#### 5. Lancer l'API
```bash
cd api
uvicorn main:app --reload

# API disponible sur: http://localhost:8000
# Documentation: http://localhost:8000/docs
```

#### 6. Lancer le Dashboard
```bash
cd frontend
npm install
npm start

# Dashboard disponible sur: http://localhost:3000
```

---

## ğŸ§ª Tests

### Tests unitaires
```bash
pytest tests/test_date_processor.py
pytest tests/test_enrichment.py
pytest tests/test_etl_pipeline.py
pytest tests/test_data_parsing.py
pytest tests/test_transformer.py


```

### Tests d'intÃ©gration
```bash
pytest tests/test_api_integration.py
```
### Tests SQL
```bash
pytest tests/test_sql_queries.py
```

### Tests API
```bash
pytest tests/test_api.py
```

### Tous les tests
```bash
pytest -m tests/ -v 
```

---

## ğŸ¨ API Endpoints

### Ã‰vÃ©nements
- `GET /events` - Liste paginÃ©e avec filtres
- `GET /events/{id}` - DÃ©tail d'un Ã©vÃ©nement
- `GET /events/search` - Recherche textuelle

### Statistiques
- `GET /stats` - Statistiques globales
- `GET /stats/by-category` - RÃ©partition par catÃ©gorie
- `GET /stats/by-city` - Top villes
- `GET /stats/by-month` - Distribution temporelle

### Exemple de requÃªte
```bash
curl "http://localhost:8000/events?city=Paris&category=Musique&page=1&page_size=20"
```

---

## ğŸ¯ Choix techniques

### Pourquoi MongoDB pour le RAW ?
- âœ… FlexibilitÃ© du schÃ©ma (JSON natif)
- âœ… Pas de transformation nÃ©cessaire
- âœ… Historisation facile
- âœ… Performance en Ã©criture

### Pourquoi PostgreSQL pour l'exploitation ?
- âœ… Jointures efficaces
- âœ… Index performants
- âœ… IntÃ©gritÃ© rÃ©fÃ©rentielle
- âœ… RequÃªtes complexes optimisÃ©es

### Pourquoi FastAPI ?
- âœ… Performance Ã©levÃ©e (async)
- âœ… Documentation auto (Swagger)
- âœ… Validation automatique (Pydantic)
- âœ… TrÃ¨s demandÃ© sur le marchÃ©

### Pourquoi React + TypeScript ?
- âœ… Ã‰cosystÃ¨me mature
- âœ… Typage fort (moins d'erreurs)
- âœ… RÃ©utilisabilitÃ© des composants
- âœ… Standard de l'industrie

---

## ğŸ­ Dashboard - FonctionnalitÃ©s

### Page : Liste des Ã©vÃ©nements
- âœ… Tableau paginÃ©
- âœ… 4+ filtres (ville, catÃ©gorie, date, prix)
- âœ… Tri par colonnes
- âœ… Chargement progressif

### Page : DÃ©tail
- âœ… Informations complÃ¨tes
- âœ… Carte interactive (Leaflet/Mapbox)
- âœ… Ã‰vÃ©nements similaires

### Page : Statistiques
- âœ… KPIs (nombre total, villes, catÃ©gories)
- âœ… Graphique camembert (catÃ©gories)
- âœ… Graphique ligne (temporel)
- âœ… Graphique barres (top villes)
- âœ… Carte avec tous les Ã©vÃ©nements

---

## âš ï¸ Limites du projet

### DonnÃ©es
- LimitÃ© aux Ã©vÃ©nements de Paris (extensible Ã  d'autres villes)
- DÃ©pend de la disponibilitÃ© de l'API
- DonnÃ©es statiques (pas de mise Ã  jour en temps rÃ©el)

### Technique
- Pas de cache Redis implÃ©mentÃ©
- Pas de gestion d'utilisateurs / authentification
- GÃ©ocodage simple (pourrait Ãªtre amÃ©liorÃ© avec Google Maps API)
- Pas de dÃ©ploiement cloud configurÃ©

### Ã‰volutions possibles
- ğŸš€ Ajouter plus de sources (Lyon, Toulouse, Marseille)
- ğŸš€ ImplÃ©menter un systÃ¨me de recommandations
- ğŸš€ Ajouter une API GraphQL
- ğŸš€ Containeriser avec Docker Compose
- ğŸš€ CI/CD avec GitHub Actions
- ğŸš€ DÃ©ploiement sur AWS/GCP/Azure

---

## ğŸ“Š SchÃ©ma de base de donnÃ©es

### MongoDB

#### Collection: events_raw
```javascript
{
  _id: ObjectId,
  source: String,
  fetched_at: ISODate,
  raw_hash: String,
  payload: Object 
}
```

#### Collection: events_enriched
```javascript
{
  _id: ObjectId,
  raw_id: ObjectId,
  status: String, // "success", "failed", "pending"
  enriched_at: ISODate,
  data: {
    latitude: Number,
    longitude: Number,
    main_category: String,
    season: String,
    is_free: Boolean
  },
  error: Object
}
```

### PostgreSQL

```sql
-- Voir sql/schema.sql pour le schÃ©ma complet
```

---

## ğŸ‘¨â€ğŸ’» Auteur

**ASHLEY TAGNE**
- Stack: Python, FastAPI, React, MongoDB, PostgreSQL

---

## ğŸ“ Licence

Ce projet est un projet Ã©ducatif rÃ©alisÃ© dans le cadre d'une formation Pour mieux apprendre et monter en compÃ©tence.

---

## ğŸ™ Remerciements

- **Data.gouv.fr** pour les donnÃ©es ouvertes
- **Paris Open Data** pour l'API Ã©vÃ©nements
- **Anthropic** pour l'assistance technique

---

## ğŸ“ Support

Pour toute question :
1. Consultez la documentation dans `/docs`
2. VÃ©rifiez les issues GitHub
3. Contactez le responsable du projet

---

**ğŸ‰ Bon dÃ©veloppement !**
